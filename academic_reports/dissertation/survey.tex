\section{Context survey}
\label{s:contextsurvey}
Placeholder - description of section\\ make things flow

phone sensing
energy measurements: method + results
energy-efficient sensing
This section tries to address objectives...

\subsection{Phone sensing}

XXX DIDN't say: However, those sensors are noisy and often inaccurate. 


Sensor-based \textbf{activity recognition} aims to determine a user's physical activity e.g. sitting, walking or driving. Most of this recognition is based on accelerometer data, though other sensors may be leveraged\ (e.g. compass). As a part of Google Play Services, activity recognition service is provided in Android \cite{android:activityrecognition}. Currently, the service is capable of detecting five different types of activities: 
 \begin{itemize}
  	\item a user is in vehicle.
    \item a user is on bike.
    \item a user is on foot.
    \item a user is still.
    \item a mobile phone is tilting.
  \end{itemize}
  
The service delivers the list of activities with the probabilities of them taking place at the given moment. The functionality requires Internet connectivity to work, since it is a part of Google Play Services. Research community has also established algorithms for detecting other activities:

 \begin{itemize}
  	\item a user is taking elevator\ (differentiate on a direction) \cite{Wang:unsupervised}.
    \item a user is taking stairs\ (differentiate on a direction) \cite{Wang:unsupervised}.
    \item a user is on escalator \ (differentiate on a direction) \cite{Wang:unsupervised}.
    \item a user is running \cite{miluzzo:cenceme}.
    \item a different position of a phone\ (chest pocket and trousers pocket) \cite{kawahara:positions}.
  \end{itemize}

Activity recognition algorithms are still in its early days. Some studies propose different algorithms for recognizing the same activity\ (e.g., walking \cite{benabdesslem:senseless} \cite{rachuri:socialsense} \cite{Kwapisz2011} ). Furthermore, the implementation of the proposed algorithms arbitrarily selects different parameters: threshold values (e.g. if standard deviation is more than 30, then a user is walking) and window size (e.g. classify weather a user is moving over the period of two seconds). Lastly, the evaluation of the algorithms is usually made on the limited amount of devices with few users holding their phones in the limited amount of positions (e.g. trouser pocket). 

Physical sensors may be leveraged for \textbf{navigation}. The traditional navigation systems may not always be sufficient: GPS is often inaccurate and does not work indoors, whereas Wi-Fi based localization requires an additional infrastructure. Accelerometer, compass and gyroscope may assist in navigation. Those sensors provide information on the speed of a user's movement\ (accelerometer) and its direction\ (compass and gyroscope). Beside leveraging activity recognition, most of inertial navigation systems also calibrates its current location with the traditional navigation systems e.g. GAC \cite{youssef:gac} uses pedestrian dead reckoning algorithm\ (compass and accelerometer data) for relative navigation, but leverages GPS to calibrate its current position. What is interesting, Constandache et al.\cite{constandache:localization} proposes a navigation system which does not rely on GPS nor Wi-Fi based localization. Instead it leverages electronic maps, which are equipped with additional information on how sensors readings should be changing while a user is walking along a path. For this purpose, direction information is used\ (compass and gyroscope). For example, a user may be localized to be on curved path if his compass' readings steadily change in the same direction. Additional information for maps may be generated and pre-fetched to mobile phone.

Inertial navigation is further leveraged for \textbf{indoor localization}. UnLoc \cite{Wang:unsupervised} identifies certain locations basing on their sensors signatures. For example, the elevator has a specific accelerometer signature or computer lab may create characteristic magnetic field. Those landmarks with their fingerprints are learned in an unsupervised manned by the system and it enables to localize a user if he visits those places again. The similar idea has been previously applied in Wi-Fi based indoor localization in Park et al.\cite{park:organic}. The hybrid solution, which combines Wi-Fi and other sensors signatures with pedestrian dead reckoning has been also suggested in Radu et al.\cite{radu:hybrid}. Lastly, SurroundSense \cite{azizyan:surroundsense} leverages the ambient sound for localization purposes.

Another idea to improve capabilities of phone sensing is to put higher quality sensors on a mobile phone. Google is currently working on Project Tango \cite{google:tango}, which adopts this idea. The prototype of that project can localize itself and build the map of the environment basing on mobile phone's high sensors and camera. 		
		
Although sensors provide much information, it is very difficult to extract meaningful information out of them. This raises many practical challenges for activity recognition\ (different algorithms for the same activity, their various parameters and their generality), which affects all phone sensing applications. Like reality mining \cite{eagle:realitymining}, those challenges may be addressed by comparing and evaluating algorithms against shared labelled data set of different activities conducted across various mobile phones with different phone's position. This has been been proposed before in Hossmann et al.\cite{hossmann:bigdatasets} and conducted to some extent in   Kwapisz et al. \cite{Kwapisz2011} (collecting the sensors data across 29 different users).
		
NOT:
	Activity recognition may be leveraged for health monitoring. Apple is believed to provide HealthBook in its next version of iOs \cite{apple:healthbook}. HealthBook is health and fitness tracking application, which leverages sensor-based activity recognition.
		
NOT:
		navigation usually done by GPS or Wireless communication\\
		but uses more energy and is often not precise enough(for indoor localization)\\
			(some reference to geofencing)\\
			 what Google exactly does when specified minimum distance for GPS update\\
			http://www.youtube.com/user/qualcommdev\\
		
\subsection{Energy measurement}
\hspace{10pt} To improve the energy efficiency of phone sensing, an accurate method for measuring it needs to be established. This task is relatively easy for Nokia phones. Nokia Energy Profiler \cite{nokia:profiler}, an application delivered by Nokia,  accurately measures power consumption and is widely used by research community \cite{kjaergaard:entracked} \cite{lu:jigsaw} \cite{li:status}. However, Google does not provide any equivalent application for Android smartphones, which makes the task difficult.The first subsection reviews the methods for measuring power consumption available on Android, whereas the second subsection demonstrates their results.

\subsubsection{Energy measurement methods}

\hspace{10pt} \textbf{The Power Monitor} is a hardware power meter delivered by MoonSooon PowerSolutions \cite{monsoon:powermonitor}.  It is designed for analyzing power of single lithium\ (Li) batteries (all Android phones). Although the tool provides accurate measurements, it can only be used in a lab environment e.g., it cannot measure energy consumption of GPS sampling while a user is moving outdoor. It is also expensive, and thus, it cannot be directly used by mobile phone users. To easy this problem, mobile phone vendors establish power profiles and put them on mobile phones \cite{android:powerprofiles} as the part of their manufacturing process. This information may be further utilized by software power profilers.

Software power profilers on Android smartphones use a \textbf{power model} to determine current energy consumption. They continuously query states of hardware components such as CPU, wireless card or screen. For example, wireless card may be switched off, be listening or sending information. Each state of every component has the corresponding value of its energy consumption. This value is available in power profiles provided by a mobile phone vendor as described in the previous paragraph. Software power profilers aggregate all of those values to estimate current energy consumption of a device. Applications using this method include PowerTutor \cite{zhang:powertutor} and Battery Monitor Widget \cite{googleplay:batterymonitorwidget}. Although this method provides online energy measurement and it can by used by users, those measurements are often inaccurate. With time, the power profiles, provided by vendors, can change as battery characteristics do [XXX references]. To easy this problem, PowerTutor adopts its algorithm basing on the device model. However, it only supports three mobile phones: HTC G1, HTC G2 and Nexus one. Furthermore, the power profilers are not applicable to phone sensing: power profiles are often not available for physical sensors e.g., PowerTutor does not support accelerometer.

Another approach to establish energy demands is \textbf{measuring battery life}. If a mobile device has high energy demands, its battery should deplete fast. For example, BetterBatteryStats \cite{googleplay:betterbatterystats} and Battery Stats Plus \cite{googleplay:batterystatsplus} use battery life as metrics to monitor mobile applications' energy consumptions. This idea was also utilized in research community. SenseLess \cite{benabdesslem:senseless} compares the energy efficiency of different sensors basing on how long the full battery depletion takes while only that sensor is being switched on. This approach provides the accurate approximation of a mobile's power consumption and does not require any additional hardware. Furthermore, it may be undertaken by mobile phone user and works for physical sensors. However, the measurement may be time consuming. In SenseLess, it took 170 hours to deplete the whole battery life while all sensors are being switched off. Since 2009\ (Senseless), the battery life increased and Android operating system is more energy efficient. The full battery depletion is likely to take even longer for modern mobile phones.

\textbf{TrepnProfiler} \cite{qualcomm:trepnprofiler} is a new way for measuring power consumption of a mobile phone. The tool, provided by Qualcomm, is a low level software, which runs only on SnapDragon chips, which are also provided by Qualcomm. The tool provides accurate measurements including physical sensors and may be used by mobile phone users. However, the tool is still relatively new and works only on specific hardware.

\begin{table}[H]
	\centering
    \begin{tabular}{| c | c | c | c | c | }
    \hline
    Method & The Power Monitor & Power models & Battery life & TrepnProfiler \\ \hline
    Accuracy & Good & & & \\ \hline
    Duration & & & & \\\hline
    Physical sensors & & & &\\ \hline
    Additional hardware & & & &\\ \hline
    Specific mobile phones & & & &\\ \hline
    \end{tabular}
    \caption{The comparison of energy measurement methods. Using battery life as metrics is the most suitable method for the project.}
	\label{table:energymeasurementmethods}
\end{table}
	
In this subsection, four different methods for energy measurement were reviewed. The characteristics of them are summarized in the Table \ref{table:energymeasurementmethods}. Since accurate energy measurements outside of the lab environment are needed, \textbf{measuring battery life was chosen for the project}.  To reduce experiments' time, the 1\% percentage battery depletion is proposed instead of full battery depletion. That method should be still accurate, which is further explained in Section \ref{s:design:measurements:method}. TrepnProfiler was not chosen for this project, as it is still technology under the development.

\subsubsection{Energy measurement results}
The energy efficiency of sensors has been examined before \cite{benabdesslem:senseless} \cite{constandache:localization} \cite{wang:eemss} \cite{chon:smartdc}. Regardless of used energy measurement method, those studies provide similar results e.g. the \plotref{senseless} shows the energy consumption of different sensors established in SenseLess \cite{benabdesslem:senseless}. All of the studies show that accelerometer is more energy-efficient than microphone. Microphone consumes less power than GPS and IEEE 802.11 scanning, which have lower power consumption than video camera.

\plot{senseless}

Depending on the energy measurement method which is used, studies may provide more details on energy consumption. For example, GAC \cite{youssef:gac}, which leverages the Power Monsoon device, establishes the power consumption pattern of GPS over time. Also, energy consumption of sensors may be examined depending on their parameters. SmartDC \cite{chon:smartdc} studies how power consumption of GPS and Wi-Fi scan changes, dpeneding on their sampling interval. It also explores energy demands of accelerometer depending on its duty cycling's ratio\ (sampling time over sleeping interval).

All of those studies either focus only  on few sensors (e.g. gpc, accelerometer and Wi-Fi in SmartDC \cite{chon:smartdc}) or measure sensors' power consumption only across one device \cite{benabdesslem:senseless}. To present the full picture, the project aims to provide the complete set of all sensors' energy measurements across three different devices. 
	
\subsection{Energy-efficient phone sensing}
hierarchy/temporal relations\\
	Fused Location provider\cite{android:locationapi}\\
		part of Location APIs, uses Google Play(activity recognition)\\
	EEMSS \cite{wang:eemss}\\
	senseless \cite{benabdesslem:senseless}\\
	ACE \cite{nath:ace}\\

adaptive sampling\\
	Rachuri et al. \cite{rachuri:dynamicsensing}\\
	SociableSense \cite{rachuri:socialsense} \\
	similar idea in other fields:\\
		wireless:\\
			channel sampling \cite{deshpande:channeling}\\
			refocusing \cite{deshpande:refocusing}\\
			coordinated sampling \cite{deshpande:coordinated}\\

offloading to the cloud\\
	Uploading strategies \cite{musolesi:offloading}\\
	SociableSense \cite{rachuri:socialsense} \\
	
two-tier\\
	Accurate two-tier classifier \cite{srinivasan:twotier}\\

machine learning\\
	Enloc \cite{constandache:enloc}\\
	SmartDC \cite{chon:smartdc}\\

others\\
	this checking IPC thing \cite{hsieh:ipc} \\

conclusions

\subsection{Conclusions}
-capabilities of phone sensing
	identify the possible improvement, reiterate !
-energy measurement:
	methods 
	results
	identify the method which needs to be used for this
		+ possible enhancement , reiterate!
-energy efficient sensing
	identify the possible improvement, reiterate!
